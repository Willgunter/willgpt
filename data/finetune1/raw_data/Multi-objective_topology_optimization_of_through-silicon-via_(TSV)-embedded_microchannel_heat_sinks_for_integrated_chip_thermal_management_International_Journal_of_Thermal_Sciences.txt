1. Introduction
The rapid advancement of integrated circuits has consistently driven the development of electronic chips toward miniaturization, integration, and high performance, aligning with Moore's Law [1,2]. To address the challenge of shrinking feature sizes, experts in the field now advocate for advanced three-dimensional (3D) packaging technology. In chip-scale 3D packaging, through silicon vias (TSVs) are essential components that utilize perpendicular metal conductors and micro-bump bonding to electrically interconnect devices across different layers [3,4], enabling greater integration and reduced signal delay. Although TSVs enhance integration, they also present challenges related to increased power consumption and heat dissipation [5,6]. To address this heat dissipation challenge, researchers have proposed an embedded cooling method, also known as near-junction cooling [[7], [8], [9], [10]].
Near-junction cooling uses microfabrication techniques to create microchannels on chip substrates, improving heat removal through packaging and bonding methods [8]. For example, test carriers with layered manifold microchannels (15 μm wide) embedded directly in a heated substrate reduced fluid flow length, achieving a heat flux of up to 910 W/cm2 while maintaining a chip temperature rise below 47 °C relative to the inlet temperature [11]. Building on conventional near-junction cooling, a co-designed microfluidic electronics system integrates a near-junction manifold microchannel cooling system on a silicon substrate with epitaxial layers, overcoming the limitations of traditional separate designs [12]. The experimental results indicated that the microchannel cooler with ten manifolds can achieve a maximum heat flux density of 1723 W/cm2 and a coefficient of performance (COP) of up to 10000, which is 50 times higher than traditional parallel channels. Feng et al. [[13], [14], [15]] investigated the single-phase flow and flow boiling characteristics of embedded silicon-based pin-fin microchannels using HFE 7100 as the coolant via theoretical, numerical and experimental approaches, providing guidance for achieving chip-scale microfluidic cooling. Generally, the principle of enhanced near-junction cooling involves designing perturbation structures to disrupt flow boundary layer and utilizing manifold networks for heat exchange. This requires a rational balance between heat transfer performance and flow pumping power in microchannel structures, which presents challenges for the traditional designs that primarily relay on the designer's experience, often lacking theoretical guidance or mathematical methods and failing to consider the synergistic optimization [16,17].
Topology optimization (TO) offers an effective solution by iteratively refining material distribution within the design domain to meet specific objectives and constraints, providing a higher degree of design freedom. In 2003, Borrvall and Petersson [18] introduced fluid TO technique by incorporating fluid flow physics, which has been subsequently applied to design fluidic systems based on Stokes flow [19,20], Navier-Stokes flow [[21], [22], [23]], compressible flow [24], and non-constant flow [25]. These methods facilitate the design of complex microchannels featuring near-junction heat sinks. Han et al. [26] optimized the thermal performance of a bionic spider web heat sink via TO, reducing both average temperature and pressure drop. Duan et al. [27] developed a TO method for designing microchannel heat sinks with different pin-fin arrays to minimize flow dissipation and surface-averaged temperature. However, previous studies mainly focused on single-objective optimization with a uniform heat source throughout the design domain. Actually, the TO of microchannel heat sink involves multi-physics field optimization of flow and heat transfer, which differs from solely structural or fluid optimization. To tackle multi-objective equilibrium problem, researchers have converted multi-objective optimization into single-objective optimization by setting constraints on either flow or heat transfer performance. Zhou et al. [28] optimized the microchannel heat sink by using inlet pressure as a constraint and employing a contour extraction method to remove stagnation zone under high Reynolds number conditions. Li et al. [29] designed microchannel heat sinks that maximized internal heat generation while imposing an upper limit on pump power. However, these constraint settings are tailored to a predefined performance optimum, which may lead to non-global optimal convergence. In addition, constrains that are too large or too small can result in non-convergence issues. Therefore, it is necessary to use an appropriate weight factor for multi-objective coupling. Zhang et al. [30] employed a RAMP function-based TO method to minimize flow dissipation and thermal resistance, and demonstrated that the two-layer water-cooled heat sink exhibited enhanced heat transfer capability compared to the single-layer model when considering fluid resistance. Li et al. [31] topologically optimized channels by minimizing flow power consumption and maximizing heat exchange, using dimensionless control equations for both single uniform and multiple non-uniform heat sources. In recent years, a pseudo-3D TO model has been established to accurately simulate conjugate heat transfer and address the trade-off among multiple objectives. McConnell et al. [32] were the first to propose a pseudo-3D TO model by embedding a substrate layer beneath the design domain. Using this model, Zeng et al. [33] designed air- and water-cooled heat sinks and achieved a maximum thermal error of less than 2 K compared to a full 3D model, yielding a high-performance heat sink. Later, they [34] extended the model to transient heat transfer, revealing notable differences from steady-state results.
It is notable to mention that in conventional TO approaches for designing microchannel heat sinks, the entire heat source region is typically used as the design domain, with limited researches exploring the effects of predefined subregions within it. For effective thermal management of 3D integrated chips, it is essential to strategically integrate TSVs into the microchannel heat sink while optimizing the flow and heat transfer performance without compromising TSVs placement needed for electrical interconnections. In this study, we employed a multi-objective TO method to optimize microchannel configurations when TSVs are predefined in the solid domain. The study systematically examined the impact of different initial designs (uniform material variable distribution and uniform micro pin-fin distribution) combined with various inlet/outlet configurations on the resulting topological structures and the corresponding thermal hydraulic performance. The optimized designs were then converted into 3D models, and a comprehensive analysis of flow and heat transfer performance of TSV-embedded TO microchannel heat sinks was studied and compared with that of the micro pin-fin ones. This work highlights how optimized TSV integration and tailored design layouts can enhance heat dissipation in 3D integrated chips, advancing efficient cooling solutions for high-density microelectronic systems.
2. Methodology
2.1. Description of design domain
Fig. 1(a) shows the TSV-embedded microchannel heat sink, which consists of inlet, outlet, design domain, substrate heat source (
, yellow arrows), and local heat source from the TSVs (
, red arrows). The solid regions in the flow channel are designed as uniform micro pin-fins, with TSVs distributing consistently within the channels to serve as electrical connection between different chip layers. Since most of the chip is located in the center of the heat sink, TSVs are only embedded within eight micro pin-fins at the bottom central portions of the design domain. Fig. 1 (b) illustrates the geometric model for the 2D TO design, where the width and length of both inlet and outlet are L and 2.5 L (L = 500 μm), and the design domain area is 10 L ∗ 5 L. The diameter of pin-fins with integrated TSV (D) is 200 μm, and the spacing between pin-fins (L) is 500 μm. The TSV parameters in this study were chosen in close alignment with current deep reactive ion etching (DRIE) and electroplating capabilities reported in recent experimental studies [35,36], thereby ensuring both manufacturability and practical relevance of the proposed designs.
Fig. 1
Download: Download high-res image (533KB)
Download: Download full-size image
Fig. 1. (a) Schematic of the microchannel cooling system with integrated TSVs, (b) Geometric model for 2D TO (the yellow dotes denote TSVs). (For interpretation of the references to colour in this figure legend, the reader is referred to the Web version of this article.)

The material properties are assigned based on predefined design variable values for different regions, allowing flexibility to accommodate various TSV distributions. The core concept of TO for microchannel heat sinks relies on the variable density method, which implements using a pseudo-density γ that varies continuously between 0 and 1. The design domain is modeled as a porous region and discretized. By adjusting γ values, the transition from fluid to solid within the design area is then achieved, with γ values ideally set at 0 (solid) or 1 (fluid).
2.2. Thermal-fluid coupling TO with density based mothed
2.2.1. Governing equations and material interpolation
The fluid flow in the cooling channel is assumed to be stable, incompressible, and fully laminar. The continuity and Navier-Stokes (N-S) equations are given by:
(1)
(2)
‐
where 
 is the nabla operator, 
 is the fluid density, 
 is the fluid dynamic viscosity, 
 is the pressure field, 
 represents the body force, which is the flow resistance of a virtual porous material, expressed as follows based on the Darcy law [18]:
(3)
‐
where 
 is permeability of porous media related to design variables 
. The Darcy interpolation equation is:
(4)
‐
‐
The intermediate values of the design variables exist in the optimization process. Although the distribution of 
 can be obtained using the mothed of moving asymptotics (MMA), the intermediate densities are penalized via interpolation functions to avoid local optima. 
 is the penalty factor of the Darcy interpolation model to adjust slope and suppress intermediate values. The convexity of Eq. (4) can be controlled by varying the penalty factor and a smaller penalty factor 
 can get better control, which is set to 0.01. 
 denotes the permeability of the solid domain, which is related to Darcy number 
 and Reynolds number 
, expressed as:
(5)
, representing the permeability of porous medium, is set to 
, and the value is consistent with many literatures [28,29,31]. The density, specific heat capacity and thermal conductivity of the material are also interpolated by the same method and the following functions are defined to illustrate the mapping relationship:
(6)
‐
‐
(7)
‐
‐
(8)
‐
‐
where the subscripts f and s represent the fluid and solid properties, respectively. 
, 
, and 
 are the penalty parameters for density (ρ), specific heat capacity (Cp), and thermal conductivity (k), which respectively serve to adjust the concavity and convexity of the corresponding functions. To reduce computational cost and accelerate convergence, it is assumed that the physical parameters of the solid and fluid materials are to remain constant during the simulation. The convergence of the intermediate values of γ can also be governed by the penalty factors.
The energy equations for the solid and fluid domains are given by:
(9)
(10)
where T is the local temperature of design domain, 
 and
 are the thermal conductivities of solid and fluid, respectively, and 
 stands for the total heat source applied in the entire domain, which includes base heat source 
 and TSV local heat sources 
. Since the local hot spot power density of the actual chip is ten to hundred times of the background heat source, thus we take 
 = 10 
 as a reference during the optimization process.
The heat transfer and flow characteristics are crucial for microchannel heat sinks. In the present study, the flow dissipation in the whole domain is chosen to represent the flow objective function:
(11)
The thermal resistance minimization in the design domain is adopted as the thermal objective function to characterize the heat transfer performance:
(12)
‐
The weight factor (w) is introduced for multi-objective function TO based on the weighted sum method, and the total objective function minimization expression is formulated as follows:
(13)
‐
The weight factor (w) range is from 0 to 1. When w = 0, only heat transfer objective is considered; otherwise, when w = 1, only flow objective is analyzed. Due to the significant magnitude difference between the flow and heat transfer objectives, the objective function must be normalized using initial state reference values. After normalization, the overall objective function is modified as:
(14)
‐
The volume of solid material in the design domain is constrained to 60 % of the design domain volume, denoted as 
.
2.2.2. Density filter and projection
To address the mesh dependency and tessellation issue in the TO model, Helmholtz equations are introduced for regularization and the Helmholtz density filter is expressed as:
(15)
‐
where 
 is the radius of filtration and 
 is the filtered design variable. The filter size is identical to the mesh size in the design domain and is assumed to be constant [28,31]. Since Helmholtz filtering can produce distinct gray cells, a projection technique using a smoothly gradient function, Heaviside function, is applied to reduce gray level, which is defined as:
(16)
‐
‐
where 
 is the output design variable, with a projection point 
 = 0.5 and a projection slope 
 = 6.
Therefore, the TO mathematical model can be formulated as follows:
(17)
2.3. Optimization problem definition
This paper chooses the 1/2 model of microchannel heat sink for to reduce the computational cost through establishing symmetric boundary conditions. The detailed boundary conditions include a uniform inlet flow rate of 
 = 0.05 m/s and a constant outlet pressure for fluid flow. Such a low flow velocity was chosen to minimize numerical oscillations and achieve smoother optimization, which ensures numerical stability and improves optimization efficiency [28]. The inlet fluid temperature is set to 
 = 293.15 K with all other walls adiabatic for heat transfer. The solution flowchart is depicted in Fig. 2. After specifying the initial design variable values γ, the reference objective function values are calculated using the Finite Element Method (FEM). The algorithm iterates by adjusting γ values according to the sensitivity analysis results, which is executed in conjunction with the adjoint method to steer the optimization direction. The numerical simulations in the TO section were implemented using computational fluid dynamics (CFD) simulations. The TO framework was constructed utilizing its built-in optimization module. Control equations were discretized using the FEM and solved with a direct solver. The MMA method is chosen as the solution method, and the iteration ends when either 500 steps have been completed or when the maximum residual of the design variables is less than 10−6. Table 1 summarizes all variable parameters for the TO model. It is worth noting that during the optimization process, the physical properties of liquids and solids are assumed to remain constant. This approach helps reduce computational costs and enhances the applicability of TO Refs. [28,29,31].
Fig. 2
Download: Download high-res image (364KB)
Download: Download full-size image
Fig. 2. Process of TO method.

Table 1. The parameter settings of TO model.

Parameter	Symbol	value
Penalty factors of Da, 
, 
 and 
, 
, 
, 
‐
, 
‐
, 
, 
‐
Density of fluid and solid	
, 
998, 2329 kg/m3
Specific heat capacity of fluid and solid	
, 
4180, 700 J/(kg 
 K)
Heat conductivity of fluid and solid	
, 
0.6, 130 W/(m 
 K)
Velocity of inlet flow	
0.05 m/s
Temperature of inlet flow	
293.15 K
3. Results and discussion
3.1. The effect of initial design on the TO configurations
In thermal-fluid TO process, inappropriate initial conditions or parameter selections may cause the TO process difficult to converge or lead to the generation of invalid designs. We first examined the effect of two initial designs on the thermal and velocity distribution of the corresponding topological structures with rectangular inlet/outlet (RIO) features. The first initial design assumes the material variables are uniformly distributed with 
 = 0.5 in the design domain (U-RIO-TO, denoted in green in Fig. 3(a)), with eight circular regions being predefined for TSV placement (see the blue dots). The second initial design considers a uniform micro pin-fin configuration (PF-RIO-TO, Fig. 3(b)), which is commonly adopted in microchannel cooling in previous literatures [13]. The pin-fin diameter and spacing without integrating TSVs are identical to those of the integrated TSVs.
Fig. 3
Download: Download high-res image (294KB)
Download: Download full-size image
Fig. 3. Initial designs in the design domain: (a) U-RIO-TO design with uniform material variable (
 = 0.5), (b) PF-RIO-TO design with uniform micro pin-fins.

Fig. 4 illustrates the evolution of channel configuration for the two initial designs when the weight factor w is 0.2. It is evident that the initial design significantly affects both the convergence behavior and material volume distribution in the TO process. In the U-RIO-TO initial design, the design variables are initially uniform across the design domain (γ = 0.5), leading to a mild change in variable gradient across neighboring meshes during iterations. At iteration step 4, the channel begins to evolve from the inlet region, progressively extending toward the outlet with minimal changes near the inlet (see the green dashed circle in Fig. 4(a)). Since TSVs are predefined in the bottom-central region with a heat flux (
) ten times greater than the background heat source (
), the optimization gradually shapes the solid material into droplet-like fins around the TSV regions for efficient heat dissipation [37,38]. During the early stages of optimization, some sharp, fracture surfaces and unphysical solid regions through which fluid appears to pass are observed. This issue is mitigated after iteration step 14, at which step a complete main channel contacting the inlet and outlet has formed (green dashed circle in Fig. 4(a)). Subsequent iterations further refine the channel structure, eliminating curved branches that tend to fold back, which usually results in a larger pressure drop. By iteration step 50, an optimized and continuous topological channel structure is achieved.
Fig. 4
Download: Download high-res image (1MB)
Download: Download full-size image
Fig. 4. Evolution of channel configuration at different iterations with w = 0.2: (a) U-RIO-TO, (b) PF-RIO-TO.

In contrast, for the PF-RIO-TO initial design, the channels tend to evolve around the initial micro pin-fins, propagating from the center towards both the inlet and outlet. At the start of the iteration, with predefined solid and fluid regions, significant differences in design variable values across different regions facilitate quick connection of fluid areas in the design domain, which increases the likelihood of forming unphysically closed flow channels that hinder convergence. Different from U-RIO-TO initial design, the droplet-like fins around the TSV regions are less prominent, as the uniform micro pin-fin configuration strongly influences the development of channel structure during optimization. Throughout the iterative process, design variable adjustments propagate outward from the central region to the inlet and outlet. By iteration step 8, a fluid channel connecting the inlet and outlet is formed (green dashed circle in Fig. 4(b)). Due to the initial parallel arrangement of solid regions, this flow channel is created parallel to the inlet and outlet that resemble the micro pin-fin layout, which is favorable to reduce pressure drop. In subsequent iterations, design variables around the inlet and outlet regions are continuously optimized, while the central solid regions are redistributed based on the objective function, achieving a balanced and efficient channel configuration.
To further investigate the impact of initial design on the TO process, we compared the optimized variable field distributions, temperature profiles, and velocity profiles for the two initial designs at various weight factors w, as shown in Fig. 5. When w = 0.2, both the U-RIO-TO and PF-RIO-TO initial designs exhibit numerous branched channels within the design domain, which increases surface area and disrupts the flow boundary layer, thereby enhancing heat transfer and reducing surface temperature. These branched channels facilitate to distribute coolant more uniformly, preventing localized heat accumulation and promoting a more even temperature distribution. However, this thermal performance improvement comes at the cost of increased flow dissipation and pressure drop. As w increases, the number of branching channels in both designs decreases, with channels becoming more elongated and parallel, as the objective function shifts to favor fluid flow. This effect is particularly pronounced in the PF-RIO-TO model, where the initial micro pin-fin design plays a significant role in shaping and regulating the channel structure in both the main and sub-flow channels. Notably, the droplet-like fins around the TSV regions gradually become irregular as w increases. The velocity distribution reveals that the higher flow velocity is concentrated in the main channel, with the PF-RIO-TO design having fewer branched channels and experiencing reduced fluid turbulence for the same w value. This results in lower velocity and temperature uniformity, along with higher surface temperature. At w = 0.8, pronounced localized high temperature zones are observed in the PF-RIO-TO design, as indicated by the extremely high temperature region within the magenta dashed frame in Fig. 5(b). Under this condition, the maximum surface temperature of PF-RIO-TO reaches 389 K, which is substantially higher than that of the U-RIO-TO design (only 357 K), indicating the markedly poorer temperature uniformity in PF-RIO-TO.
Fig. 5
Download: Download high-res image (982KB)
Download: Download full-size image
Fig. 5. Optimized results for the distributions of variable field, temperature and velocity at various weight factors: (a) U-RIO-TO, (b) PF-RIO-TO.

3.2. The effect of inlet and outlet layout on the TO configuration
The TO results vary significantly with different inlet/outlet layouts, impacting the fluid flow and heat transfer characteristics of the microchannel heat sink. This section examines the impact of three inlet/outlet layouts on the TO configurations: rectangular inlet/outlet (RIO), rectangular-inlet/trapezoidal-outlet (RITO), and trapezoidal inlet/outlet (TIO). It is worth noting that the U initial design and PF initial design exhibit similar TO trends under all inlet/outlet layouts, therefore we only present the results for the U initial design for representative analysis. Fig. 6 shows the temperature and flow velocity distributions for the optimal channel configurations corresponding to these inlet/outlet layouts (i.e., U-RIO-TO, U-RITO-TO, and U-TIO-TO) at w = 0.2.
Fig. 6
Download: Download high-res image (713KB)
Download: Download full-size image
Fig. 6. Temperature and flow velocity distributions for the optimal channel configurations with three different inlet/outlet layouts at w = 0.2: (a) U-RIO-TO, (b) U-RITO-TO, (c) U-TIO-TO.

In all configurations, TO produces a main channel connecting the inlet to the outlet, with higher flow velocity concentrating in the channel. Numerous branched channels separate from the main flow path, distributing fluid uniformly across the design domain. Notably, droplet-like pin-fin channels form around the TSV area regardless of the inlet/outlet configuration. Since the inflow is perpendicular to the inlet boundary, flow is constrained in the rectangular inlet for U-RIO-TO and U-RITO-TO, forming a wider and curved main channel that distributes fluid away from the center to enhance uniformity (see Fig. 6(a) and (b)). This channel curvature increases flow velocity, making it significantly higher in U-RIO-TO and U-RITO-TO than in U-TIO-TO. In contrast, the U-TIO-TO structure benefits from the trapezoidal extension, which provides a longer and broader flow boundary than the rectangular inlets. This configuration allows greater flexibility in generating multiple inflow channels within the design domain (highlighted by blue dashed circles in the variable field distribution). For example, U-RIO-TO forms a single main inlet channel that branches into several smaller channels, ultimately converging into one outlet. U-RITO-TO also has a single inlet channel but features three outlet channels (see the blue and pink dashed lines in Fig. 6(b)); however, the restricted rectangular inlet contributes to higher flow velocities and pressure drops. In the U-TIO-TO configuration, three inlet and four outlet channels allow fluid to be evenly distributed throughout the design domain (see the blue and pink dashed lines in Fig. 6(c)), eliminating the localized high-temperature regions observed in U-RIO-TO. The unique inlet/outlet features in the U-TIO-TO design eliminate the need for additional power-consuming distribution structures near the inlet, while also ensuring excellent distribution uniformity and minimal flow resistance.
We further analyzed the flow and heat transfer performance under different initial designs and inlet/outlet layouts with varying w values. The variations in average temperature (
) and pressure drop (ΔP) with w are plotted in Fig. 7(a) and (b), respectively. As shown in Fig. 7 (a), 
 increases with w, which is attributed to the increase in parallel channels and the reduction in curved branched channels. For the U initial design, the 
 values are comparable across the different inlet/outlet layouts (U-RIO-TO, U-RITO-TO and U-TIO-TO) over the range of w. These values are generally higher than those of the PF initial designs (PF-RIO-TO, PF-RITO-TO and PF-TIO-TO), and the discrepancy becomes more pronounced as w increases. For instance, 
 is 14 K larger in PF-RIO-TO than in U-RIO-TO at w = 0.8. This is because U-RIO-TO features more curved branched channels that significantly enhance heat transfer compared to the relatively straight and less sinuous channels in PF-RIO-TO at the same w. In the PF initial design, the 
 of PF-TIO-TO is lower than that of PF-RIO-TO and PF-RTIO-TO due to a larger surface area provided by more inlet and outlet channels, which enhances heat exchange between the cooling fluid and micro pin-fins.
Fig. 7
Download: Download high-res image (339KB)
Download: Download full-size image
Fig. 7. Performance comparison of different inlet/outlet arrangement and initial design: (a) 
 , (b) 
.

The pressure drop characteristics differ significantly among the various designs. The ΔP decreases as w increases, and the discrepancy in ΔP is more pronounced at lower w values. Although 
 is lower for the three U initial designs compared to the PF initial designs, their ΔP are considerably higher due to the presence of additional curved branched channels, which extend the flow path and increase flow dissipation. Among all configurations, the PF-TIO-TO design yields the lowest ΔP, whereas U-RIO-TO exhibits the highest. This behavior arises from the superior flow uniformity in PF-TIO-TO, where more inlet and outlet channels are connected in a relatively straight configuration, thereby reducing flow dissipation. Therefore, it can be deduced that the TO results exhibit a distinct performance preference governed by the initial design, effectively meeting the objective function under varying conditions, such as minimizing maximum temperature under a non-uniform heat source.
4. 3D numerical results
To validate the superiority of the TO design, the 2D topology-optimized channel configurations were converted into full-scale 3D microchannel heat sink models, and the corresponding flow and heat transfer performances were assessed using CFD simulations. It should be emphasized that not all the 2D TO results were extended to 3D models, only the TIO-based TO configurations exhibiting the superior performance were chosen for 3D validation. The rationale of 2D optimization and 3D validation strategy is grounded that although 2D simulations cannot fully capture every three-dimensional detail, they accurately reflect the dominant flow and heat-transfer behaviors and thus provide reliable guidance for 3D performance predictions. In microchannel heat sinks, the cross-sectional geometry in the height direction is typically uniform, and the primary fluid motion from inlet to outlet occurs within the planar direction. While heat conduction through the substrate is inherently three-dimensional, once heat reaches the channel walls, the fluid-wall convection is largely governed by 2D cross-sectional features. With proper equivalence treatment, the 2D model can therefore capture the essential physics of the coupled flow and thermal processes, which has been verified in our previous work [28]. Furthermore, conducting TO in the 2D plane also greatly reduces the computational cost, enabling efficient exploration of a broad design space and identification of key structural trends that would be impractical to evaluate directly in 3D. For these reasons, we only selected the 2D TO configurations exhibiting superior flow and thermal performance as representative cases for subsequent 3D simulations. This approach ensures that the essential flow and heat-transfer characteristics of the optimized microchannel designs are accurately captured while remaining computationally practical.
4.1. Description of 3D models and model validation
In this section, the U-TIO-TO and PF-TIO-TO models with w = 0.2 are selected. For comparison purpose, the performances of non-optimized TO designs, i.e., conventional micro pin-fin heat sinks with RIO and TIO configurations (denoted as MPF-RIO and MPF-TIO, respectively) are also evaluated and used as a baseline to evaluate both the effectiveness of TO method and the influence of the manifold arrangement. The hydraulic diameter is approximately the same between the TO model and the baseline model. The conversion process of the 2D optimized structure into 3D model is shown in Fig. 8 (a). Although a density filter and projection were applied during TO, intermediate density cells (0 < γ < 1) persisted between the solid (γ = 1) and fluid (γ = 0) regions, causing blurred edges at the boundaries. Therefore, a threshold of γ = 0.5 was set to distinguish solid from fluid regions. The 2D model is stretched with a thickness of 0.2 mm, and a base heat source with the same thickness is located in the bottom of the model. Finally, the 3D model is imported into CFD software for further geometric modeling and meshing. The governing equations were discretized using the finite volume method. A pressure-based solver was employed, with pressure-velocity coupling achieved through the moving SIMPLE algorithm. Both momentum and energy equations were discretized using second-order upwind schemes. Convergence criteria were set with an energy equation residual below 10−7 and continuity equation residual below 10−5. Peak temperature on the heating surface and inlet pressure parameters were simultaneously monitored. When residuals met the thresholds and monitored parameters stabilized, the calculation was deemed complete, and post-processing analysis commenced.
Fig. 8
Download: Download high-res image (485KB)
Download: Download full-size image
Fig. 8. The schematic diagram of 3D model: (a) the process of 3D geometry preparation, (b) U-TIO-TO (w = 0.2), (c) PF-TIO-TO (w = 0.2), (d) MPF-RIO, (e) MPF-TIO.

A numerical model of the 3D conjugate heat transfer system is developed under the following assumptions: (1) steady state, incompressible, constant, and laminar flow; (2) no-slip boundary condition at solid-liquid interfaces; (3) no vapor-liquid phase transition; and (4) neglecting gravity and thermal radiation. The control equation can be formulated as:
Continuity equation:
(18)
Momentum equation:
(19)
‐
Energy equation:
(20)
(21)
The deionized water and silicon are used as the working fluid and solid material in the computational domain, respectively. This choice is consistent with the most experimental [35,36] and numerical studies [[39], [40], [41]] on TSV-embedded microchannel cooling, thereby supporting the rationality of the working fluid selection and boundary condition settings. The properties of water vary with temperature, as shown in Table 2. Different from the TO process, simulation verification employs temperature-dependent properties. This approach more accurately reflects the transport characteristics of fluids under temperature changes and enables higher simulation accuracy. Simultaneously, it provides more reliable references and comparison benchmarks for future experimental design, reducing expected deviations caused by model simplification [28,31].
Table 2. Variation of material properties with temperature.

T, 
293	308	323	338	353	368	383	398
, 
0.60	0.62	0.64	0.66	0.67	0.68	0.68	0.69
, 
126.71	120.83	115.29	110.06	105.13	100.5	96.13	92.03
‐
, Pa·s	10.1	7.21	5.46	4.31	3.52	2.95	2.53	2.20
4.2. Date reduction
The Reynolds number can be defined as follows:
(22)
where 
 is the dynamic viscosity, 
 is the density of the liquid, 
 is the characteristic length of the microchannel inlet.
The Nusselt number can be obtained as follows:
(23)
where 
 denotes the hydraulic diameter:
(24)
where 
 is the infiltration area between the channel and fluid, 
 is the wetted perimeter of the channel, and 
 refers to the average heat transfer coefficient of the heat sink:
(25)
‐
where 
 stands for the wall average temperature of the base heat source, 
 is the average inlet and outlet temperatures of the fluid, 
 is the effective heat transfer area between the solid and fluid, 
 is the heat flux density of the entire domain, including the bottom surface heat source 
 and the TSV heat source 
.
(26)
To further evaluate the comprehensive effect of flow and heat transfer properties, the performance efficiency criteria (PEC) is calculated for different structures [42]:
(27)
where 
 represents the friction factor, and subscript 
 and 0 denote the improved and benchmark design, respectively. For PEC>1, the proposed microchannel outperforms the conventional designs in microchannel cooling systems. The flow friction factor is defined by Ref. [43]:
(28)
where 
 is the total cooling channel length.
4.3. Mesh independence test and model validation
To balance computational cost and accuracy, a mesh independence test was conducted to determine the optimal number and size of elements. The U-TIO-TO (w = 0.2) was chosen as a representative case, and unstructured tetrahedral mesh was employed due to the channel complexity. A boundary layer mesh with a first layer thickness of 0.05 mm is generated at the fin edges to enhance the accuracy of fluid calculations near the wall. Local refinements of the boundary layer were also carried out to improve the reliability of the numerical results, as shown in Fig. 9(a). Fig. 9(b) shows the mesh independence test result for 
 (Re = 600) and 
 = 293 K. The relative error was calculated according to following equation:
(28)
‐
where 
 denotes the parameter values (i.e., 
 or ΔP) obtained from the finest grid, while 
 represents the values derived from other meshes. It can clearly be seen from Fig. 9(b) that the difference of 
 or ΔP between mesh number 
 and the finest mesh is less than 1 %, thus the final mesh number was chosen to be 
, taking into account the computational time and calculation accuracy. The 3D convective heat transfer model is validated by the experimental results of Feng [44]. Fig. 9(c) presents the variation of pressure drop with volume flow rate in the study compared with the experimental results. The simulation results show a good consistency with the experimental results, which validates the accuracy of our 3D convective heat transfer model.
Fig. 9
Download: Download high-res image (616KB)
Download: Download full-size image
Fig. 9. (a) Computational mesh detail for U-TIO-TO (w = 0.2), (b) results of the mesh independence test, (c–d) validation of simulation model.

4.4. Results of 3D numerical simulations
4.4.1. Performance analysis of flow and heat transfer
Fig. 10 illustrates the velocity and temperature distributions of the four designs under the working condition of 
 = 293 K, 
, and 
. It can be clearly seen that the fin arrangement effectively interrupts and re-develops the flow boundary layer. For the U-TIO-TO (w = 0.2) and PF-TIO-TO (w = 0.2) designs, numerous branched channels are formed from the main channel, the notable flow separation effect of the channels allows the development of both flow and thermal boundary layers, thereby enhancing heat transfer efficiency. The TIO layout presents more areas for fluid flow and generate more channels from the inlet and converge from multiple channels into the outlet, which render a more uniform flow velocity across the design domain. The temperature increases gradually along the flow direction, with fewer localized hot spots occurring across the design domain. However, the temperature of the channel walls at the downstream in the PF-TIO-TO (w = 0.2) design is higher than that in U-TIO-TO (w = 0.2) due to the relative parallel nature of the channels that degrade heat exchange between the fluid and channels. In the non-optimized TO designs, the rectangular inlet channel of MPF-RIO helps to accelerate the fluid at the inlet indirectly due to the confined design, thus featuring the maximum flow velocity and reducing the surface temperature. However, the uniformly distributed micro pin-fins reduces the effect of separation flow, causing flow maldistribution in the design domain that leads to the formation of low velocity regions at the corners (Fig. 10(c)) as well as the trailing edges of uniformly distributed micro pin-fins (Fig. 10(c)–(d)), which hinders heat dissipation and leads to a localized high temperature region.
Fig. 10
Download: Download high-res image (1MB)
Download: Download full-size image
Fig. 10. Temperature and velocity distributions of four different designs (x-y plane, z = 0.1 mm): (a) U-TIO-TO (w = 0.2), (b) PF-TIO-TO (w = 0.2), (c) MPF-RIO, (d) MPF-TIO.

To further illustrate the superiority of topology optimized microchannel structures with integrated TSVs, the velocity streamlines are derived for the four designs. It is observed from Fig. 11 that in the U-TIO-TO (w = 0.2) and PF-TIO-TO (w = 0.2) designs, the droplet-like fins are smooth and sharp at the trailing edges, and the smaller counter-pressure gradient of the pin-fins avoids the flow loss caused by vortex shedding, which results in a significant reduction of the vortex region. Moreover, the droplet-like pin-fins can effectively promote the flow separation and thus thinner the flow boundary layer to enhance the heat transfer when observing the velocity streamlines around the pin-fins in the TSVs region, as shown in Fig. 11(a)–(b) with localized enlarged regions. In contrast, in the non-optimized TO designs (MPF-RIO and MPF-TIO), there is an obvious flow stagnation zone at the downstream of each pin-fin, which worsens heat transfer and increases pressure drop.
Fig. 11
Download: Download high-res image (1MB)
Download: Download full-size image
Fig. 11. Velocity streamlines of four different designs (x-y plane, z = 0.1 mm): (a) U-TIO-TO (w = 0.2), (b) PF-TIO-TO (w = 0.2), (c) MPF-RIO, (d) MPF-TIO.

To further evaluate and compare the flow and heat transfer performance of the four designs, Fig. 12 presents the average temperature of the heated surface (Tave), system pressure drop (ΔP), convective heat transfer coefficient (h), and PEC for the inlet flow velocity (
) in the range of 0.6 m/s and 3.0 m/s when 
. Note that the performances were conducted in a broader range of flow velocities in order to assess of the robustness and applicability of the TO structure. The Re is within the range of 300–1500 under this condition and the fluid flow still matches laminar flow. It can be seen that as the inlet flow velocity 
 increases, the Tave of all designs decreases significantly due to enhanced mixing between fluid and channel walls. Simultaneously, the ΔP increases as a result of the increased frictional pressure loss. Among all the designs, the U-TIO-TO (w = 0.2) demonstrates the lowest Tave across the entire range of 
, while the PF-TIO-TO (w = 0.2) exhibits the highest Tave. At 
 = 3.0 m/s, the Tave of the U-TIO-TO (w = 0.2) is ∼6 K lower compared to the PF-TIO-TO (w = 0.2) and the non-optimized TO designs (MPF-RIO and MPF-TIO). However, the ΔP of U-TIO-TO (w = 0.2) is higher than that of PF-TIO-TO (w = 0.2), which is consistent with the trends observed in Section 3.1. Benefiting from the enlarged solid-liquid contact area and the lowest Tave among all designs, the U-TIO-TO (w = 0.2) achieves approximately a 55 % enhancement in the heat transfer coefficient h compared to the non-optimized TO designs. Although the h values of MPF-RIO and MPF-TIO are nearly identical, MPF-TIO exhibits a significantly higher PEC, indicating that an effective inlet-outlet manifold arrangement can yield substantial improvement in overall thermal-hydraulic performance. This result clearly demonstrates that TIO configuration provides a more favorable flow distribution compared to RIO. Furthermore, by comparing the TO-optimized TIO designs against their non-optimized TIO counterparts, it is evident that the optimized U-TIO-TO (w = 0.2) design delivers a 12 % higher PEC than MPF-TIO. This enhancement is attributed solely to the topology-optimized channel geometry, confirming that TO provides additional performance gains beyond manifold geometry alone. Notably, the optimized TIO design achieves the highest PEC of 1.42 among all configurations, clearly demonstrating the effectiveness and superiority of TO under well-designed manifold layouts. In contrast, the PEC values of the PF-TIO-TO (w = 0.2) and MPF-TIO are comparable, suggesting that the topological optimization does not significantly enhance heat transfer or reduce pressure drop for the initial design featuring uniform pin-fins.
Fig. 12
Download: Download high-res image (509KB)
Download: Download full-size image
Fig. 12. The variation of the 
, 
, 
 and PEC as a function of inlet flow velocity.

4.4.2. Effect of TO inlet velocity on thermohydraulic performance
It is worth noting that the abovementioned 2D TO channel configurations were obtained under laminar flow with a low inlet velocity boundary condition (
 = 0.05 m/s). As discussed in section 4.4.1, increasing the flow velocity (i.e., 
 = 3 m/s) leads to the formation offlow stagnation zones at the trailing edge of fins generated by TO. This occurs due to the lower flow velocity at the channel downstream of the fin edges and the higher flow velocity in the middle of the channel caused by fluid convergence. The resulting flow creates vortices that impede fluid mixing between neighboring zones and degrade heat exchange efficiency (Fig. 13(a)). As the flow velocity further increases, the rate of decrease in 
 slows significantly and the pressure drop rises more rapidly, as observed in the trends of Fig. 12. To mitigate the stagnation zones and enhance the thermal performance of microchannel heat sink under relatively high Re condition, our previous study proposed a contour extraction based on topology optimization (CEBTO) method [28], which involved identifying low-velocity regions based on a threshold velocity, extracting their contours and replacing these regions with solid materials. This approach significantly improved the thermohydraulic performance under high Re.
Fig. 13
Download: Download high-res image (2MB)
Download: Download full-size image
Fig. 13. The velocity vector diagrams of the TO designs: (a) U-TIO-TO (w = 0.2), (b) U-TIO-TO-2 obtained by CEBTO method; (c-f) The variation of the 
, 
, 
 and PEC as a function of inlet flow velocity for CEBTO-generated models.

In this study, we applied the CEBTO method to optimize the channel configuration across a wide range of flow velocity condition to address the limitations of the standard TO approach. Specifically, we increased the 
 from 0.05 m/s to 0.2 m/s for the model U-TIO-TO (w = 0.2) and PF-TIO-TO (w = 0.2) without changing other optimization conditions. The resulting CEBTO-generated models are named as U-TIO-TO-2 and PF-TIO-TO-2, respectively. As shown in Fig. 13(b), the stagnation zones in the U-TIO-TO-2 model are significantly reduced compared to the TO-generated configuration, indicating enhanced interaction between the fluid and the channel wall. Moreover, the CEBTO-generated models exhibit a sharper morphology at the trailing edge of the fins, which aligns with the results presented in the article [28]. It is important to note that further increasing 
 results in the failure of convergence during the TO process. This suggests that there exists an optimal range for the 
 in the TO process, emphasizing the need for a rational choice of 
 to ensure successful convergence and effective design outcomes.
The variations of Tave, ΔP, h and PEC with flow velocity 
 for the four improved structures were analyzed under a heat flux of 80 W/cm2. It can be seen from Fig. 13(c-e) that although the thermal performance of U-TIO-TO-2 shows limited improvement compared to U-TIO-TO (w = 0.2), it achieves a notable reduction in ΔP of ∼20 % when 
 = 3.0 m/s. In contrast, PF-TIO-TO-2 demonstrates enhanced thermal performance compared to the PF-TIO-TO (w = 0.2), while the ΔP remains comparable between the two designs. Overall, the U-TIO-TO-2 possesses the highest PEC, achieving a value of 1.51 (Fig. 13(f)), which is ∼13 % higher than that of U-TIO-TO (w = 0.2). It is interestingly to note that unlike the comparable PEC values observed for PF-TIO-TO (w = 0.2) and MPF-TIO, the PEC of PF-TIO-TO-2 is ∼10 % higher than that of PF-TIO-TO (w = 0.2). This highlights the advantages of CEBTO-generated models in significantly improving the thermal-hydraulics performance of microchannel heat sink.
5. Conclusion
This study employs a TO method to design microchannel heat sink integrated with TSVs. A pre-defined solid region within the design domain is introduced to accommodate TSVs location and quantity constraints in the actual chip, ensuring the TSVs region remains unaltered during optimization. The resulting topology-optimized microchannel heat sink effectively balances thermal and flow performance. The key conclusions are summarized as follows.
(1)
A multi-objective TO method is proposed to optimize microchannel heat sink integrated with TSVs, targeting minimal thermal resistance and flow dissipation. The effects of two initial designs (uniform material variable distribution and uniform micro pin-fin distribution) on the optimization results were compared. The micro pin-fin initial design promoted the development of flatter flow channel with a lower pressure drop compared to the uniform initial design. Trapezoidal inlet/outlet (TIO) configurations provide higher topological freedom, enabling wider main flow paths and more uniform temperature distribution. In contrast, rectangular inlet/outlet (RIO) configurations cause a significant bend in the flow velocity distribution, leading to a larger pressure drop.
(2)
The optimized 2D model was extended to a 3D conjugate heat transfer fluid model. The results show that the U-TIO-TO (w = 0.2) model achieves an average temperature reduction of 6 K compared the non-TO design. Additionally, the convective heat transfer coefficient improves by 55 %, with a PEC reaching up to 1.42. These findings validate the feasibility of the TO approach for optimizing microchannel heat sink with integrated TSVs.
(3)
The current topology-optimized channel is designed for low flow rates, which limits its performance under high-Re applications. An improved TO model (U-TIO-TO-2) with higher 
 is proposed, which effectively reduces the stagnation zone and improving overall performance. Compared to U-TIO-TO (w = 0.2), the improved model achieves a 20 % reduction in pressure drop without significantly increasing the average temperature, rendering a higher PEC of 1.51 at elevated flow velocity.
This work provides a systematic TO-based framework for designing microchannel heat sinks integrated with TSVs, offering valuable insights for advanced thermal management in 3D chips. Future research could explore experimental validation of these findings and extend the approach to high-Re applications and other miniaturization systems.
Nomenclature

infiltration area between the channel and the fluid (m2)
effective heat transfer area between the solid and the fluid (m2)
Cp	specific heat capacity (J/(kg·K))
Darcy number
hydraulic diameter (m)
e	relative error
body force
f	friction factor
h	heat transfer coefficient (kW/(m2 
 K))
objective function
k	thermal conductivity (W/(m 
 K))
L	characteristic length (mm)
Nu	Nussle number
wetted perimeter of the channel (mm)
PEC	performance efficiency criteria
P	pressure (Pa)
pressure drop (Pa)
q	penalty factor
Q	total heat source (
)
base heat source (
)
TSV local heat source (
)
Re	Reynolds number
r	filtration radius
T	temperature (K)
Temperature at the wall (K)
U	flow velocity (m/s)
volume fraction
w	weight factor
x	coordinate in x-direction
y	coordinate in y-direction
z	coordinate in z-direction
Greek symbols
inverse permeability of porous media
projection slope
design variable
projection point
filtered design variable
density (kg/m3)
dynamic viscosity (Pa·s)
design domain
Subscript
ave	average
f	fluid
in	inlet
max	maximum
min	minimum
out	outlet
s	solid
TO	topology optimization
improved design
0	benchmark design